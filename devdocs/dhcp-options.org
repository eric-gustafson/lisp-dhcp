#+title: DHCP options



* Encode dhcp options

  - [[https://tools.ietf.org/html/rfc2132][RFC 2132]]
  - [[file:../parse-dhcp-options.lisp]]
  
  We use a sexp-document to handle programming the dhcp messages.
  
#+BEGIN_SRC lisp :results value
  (encode-options `(
                   (:subnet 255 255 255 0)
                   (:server-id  192 168 134 2)

                   (:domain-server (8 8 8 8) (4 4 4 4))
                   (:hostname "wtf-23")
                   (:routers (192 168 134 2))
                   (:requested-ip-address (192 168 134 2))
                   :dhcp-offer
                   (:lease-time 300)
                   )
                 )
#+END_SRC

#+RESULTS:
| 1 | 4 | 255 | 255 | 255 | 0 | 54 | 4 | 192 | 168 | 134 | 2 | 6 | 8 | 8 | 8 | 8 | 8 | 4 | 4 | 4 | 4 | 12 | 6 | 119 | 116 | 102 | 45 | 50 | 51 | 3 | 4 | 192 | 168 | 134 | 2 | 50 | 4 | 192 | 168 | 134 | 2 | 53 | 1 | 2 | 51 | 4 | 0 | 0 | 1 | 44 |


* TODO decode dhcp request

* TODO encode dhcp reply

* TODO recreate the captured packets we have using encode function


